{"ast":null,"code":"import _regeneratorRuntime from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/costantinos/Documenti/Dapp/src/components/App.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport Dapp from '../abis/Dapp.json';\nimport { OBJViewer, STLViewer } from 'react-stl-obj-viewer';\nimport axios from 'axios';\n\nvar NodeStl = require(\"node-stl\"); //connessione al nodo di infura per ipfs\n\n\nvar ipfsClient = require('ipfs-http-client');\n\nvar ipfs = ipfsClient({\n  host: 'ipfs.infura.io',\n  port: 5001,\n  protocol: 'https'\n}); //tipi di formato .stl (più comune) 3MF AMF e .obj(open source)\n// usa accept\n// url example:'https://ipfs.infura.io/ipfs/QmZsdEtccredWWGZzZvU5fStsC7aWADJch588qAarGTky9'\n//{`https://ipfs.infura.io/ipfs/${this.state.designHash}`}\n\nfunction timeout(delay) {\n  return new Promise(function (res) {\n    return setTimeout(res, delay);\n  });\n}\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    //operazioni quando il contratto viene chiamato\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.loadWeb3();\n\n              case 2:\n                _context.next = 4;\n                return this.loadBlockchainData();\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }() //carico la finestra (metamask) web3 o la converto in web3\n\n  }, {\n    key: \"loadWeb3\",\n    value: function () {\n      var _loadWeb = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!window.ethereum) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                window.web3 = new Web3(window.ethereum);\n                _context2.next = 4;\n                return window.ethereum.enable();\n\n              case 4:\n                _context2.next = 6;\n                return this.setState({\n                  ethBrowser: true\n                });\n\n              case 6:\n                _context2.next = 17;\n                break;\n\n              case 8:\n                if (!window.web3) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                window.web3 = new Web3(window.web3.currentProvider);\n                _context2.next = 12;\n                return this.setState({\n                  ethBrowser: true\n                });\n\n              case 12:\n                _context2.next = 17;\n                break;\n\n              case 14:\n                console.log('Non-Ethereum browser detected. ');\n                _context2.next = 17;\n                return this.setState({\n                  ethBrowser: false\n                });\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function loadWeb3() {\n        return _loadWeb.apply(this, arguments);\n      }\n\n      return loadWeb3;\n    }() // dati della blockchain:\n    //account è l'indirizzo di colui che firma la transazione\n    //networkid è l'id della connessione es:localhost:7545\n    //contract è la variabile del contratto\n    //designHash è l'hash del file salvato sull'ipfs\n\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var web3, accounts, networkId, networkData, contract, designHash;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                web3 = window.web3;\n                _context3.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context3.sent;\n                this.setState({\n                  account: accounts[0]\n                });\n                _context3.next = 7;\n                return web3.eth.net.getId();\n\n              case 7:\n                networkId = _context3.sent;\n                networkData = Dapp.networks[networkId];\n\n                if (!networkData) {\n                  _context3.next = 18;\n                  break;\n                }\n\n                contract = web3.eth.Contract(Dapp.abi, networkData.address);\n                this.setState({\n                  contract: contract\n                });\n                _context3.next = 14;\n                return contract.methods.get().call();\n\n              case 14:\n                designHash = _context3.sent;\n                this.setState({\n                  designHash: designHash\n                });\n                _context3.next = 19;\n                break;\n\n              case 18:\n                window.alert('Smart contract not deployed to detected network.');\n\n              case 19:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }]);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.testMeta = function (event) {\n      event.preventDefault();\n      var web3 = window.web3;\n      var try1 = web3.eth.accounts.create();\n      console.log(try1);\n    };\n\n    _this.startApi = function (event) {\n      event.preventDefault();\n      axios.get('http://127.0.0.1:5000/api/get1').then(function (response) {\n        console.log(response.data);\n      });\n    };\n\n    _this.startApi2 = function (event) {\n      event.preventDefault();\n      console.log(\"sending data\");\n      var username = _this.state.username;\n      var password = _this.state.password;\n      axios.post('http://127.0.0.1:5000/api/post1', {\n        username: username,\n        password: password\n      }).then(function (response) {\n        console.log(response.data);\n      });\n    };\n\n    _this.captureFileL =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging username\");\n                stri = event.target.value;\n                _context4.next = 5;\n                return _this.setState({\n                  username: stri\n                });\n\n              case 5:\n                console.log(_this.state.username);\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL1 =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging password\");\n                stri = event.target.value;\n                _context5.next = 5;\n                return _this.setState({\n                  password: stri\n                });\n\n              case 5:\n                console.log(_this.state.password);\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL2 =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(event) {\n        var stri, check, check1;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging email\");\n                stri = event.target.value;\n                check = stri.includes(\"@\");\n                check1 = stri.includes(\".\");\n\n                if (!(check && check1)) {\n                  _context6.next = 13;\n                  break;\n                }\n\n                _context6.next = 8;\n                return _this.setState({\n                  invalidEmail: false\n                });\n\n              case 8:\n                _context6.next = 10;\n                return _this.setState({\n                  email: stri\n                });\n\n              case 10:\n                console.log(_this.state.email);\n                _context6.next = 16;\n                break;\n\n              case 13:\n                _context6.next = 15;\n                return _this.setState({\n                  invalidEmail: true\n                });\n\n              case 15:\n                console.log(\"invalidEmail\");\n\n              case 16:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL3 =\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging name\");\n                stri = event.target.value;\n                _context7.next = 5;\n                return _this.setState({\n                  name: stri\n                });\n\n              case 5:\n                console.log(_this.state.name);\n\n              case 6:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL4 =\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging surname\");\n                stri = event.target.value;\n                _context8.next = 5;\n                return _this.setState({\n                  surname: stri\n                });\n\n              case 5:\n                console.log(_this.state.surname);\n\n              case 6:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL5 =\n    /*#__PURE__*/\n    function () {\n      var _ref6 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging wallet\");\n                stri = event.target.value;\n                _context9.next = 5;\n                return _this.setState({\n                  wallet: stri\n                });\n\n              case 5:\n                console.log(_this.state.wallet);\n\n              case 6:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      return function (_x6) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    _this.setRegister =\n    /*#__PURE__*/\n    function () {\n      var _ref7 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee10(event) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"register init\");\n                _context10.next = 4;\n                return _this.setState({\n                  register: true\n                });\n\n              case 4:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }));\n\n      return function (_x7) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n\n    _this.Return =\n    /*#__PURE__*/\n    function () {\n      var _ref8 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee11(event) {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"register aborted\");\n                _context11.next = 4;\n                return _this.setState({\n                  register: false\n                });\n\n              case 4:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11);\n      }));\n\n      return function (_x8) {\n        return _ref8.apply(this, arguments);\n      };\n    }();\n\n    _this.sendData = function (event) {\n      event.preventDefault();\n      var valid = _this.state.invalidEmail;\n      if (valid) return;\n      console.log(\"sending data\"); //const web3 = window.web3\n      //const try1 =  web3.eth.accounts.create();\n      //console.log(try1)\n      //this.setState({wallet : try1.address, privateKey : try1.privateKey })\n\n      var username = _this.state.username;\n      var password = _this.state.password;\n      var wallet = _this.state.wallet;\n      var email = _this.state.email;\n      var name = _this.state.name;\n      var surname = _this.state.surname;\n      console.log(wallet);\n      axios.post('http://127.0.0.1:5000/api/post2', {\n        username: username,\n        password: password,\n        wallet: wallet,\n        email: email,\n        name: name,\n        surname: surname\n      }).then(function (response) {\n        console.log(response.data);\n\n        _this.setState({\n          register: false\n        });\n      });\n    };\n\n    _this.formatSelect =\n    /*#__PURE__*/\n    function () {\n      var _ref9 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee12(event) {\n        var designFormat;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"format selected\");\n                designFormat = event.target.value;\n                console.log(_this.state.designFormat);\n                console.log(event.target.value);\n                _context12.next = 7;\n                return _this.setState({\n                  designFormat: designFormat\n                });\n\n              case 7:\n                console.log(_this.state.designFormat);\n\n              case 8:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12);\n      }));\n\n      return function (_x9) {\n        return _ref9.apply(this, arguments);\n      };\n    }();\n\n    _this.submitMetaFile = function (event) {\n      event.preventDefault();\n      console.log(\"submitting metadata to IPFS\");\n      var designName = _this.state.designName;\n      var desc = _this.state.desc;\n      var makerName = _this.state.makerName;\n      var makerSurname = _this.state.makerSurname;\n      var designHash = _this.state.designHash;\n\n      if (designName == '' || makerName == '' || makerSurname == '' || desc == '') {\n        console.log(\"metadata not saved\");\n\n        _this.setState({\n          designName: '',\n          makerName: '',\n          makerSurname: '',\n          desc: ''\n        });\n\n        return;\n      } else {\n        if (designHash == '') {\n          console.log(\"design not uploaded\");\n        } else {\n          var toJSON = {\n            designName: designName,\n            makerName: makerName,\n            makerSurname: makerSurname,\n            desc: desc,\n            designHash: designHash\n          };\n          var myJson = JSON.stringify(toJSON);\n          console.log(toJSON);\n          console.log(myJson);\n          var buf = Buffer.from(myJson);\n          ipfs.add(buf, function (error, result) {\n            console.log('Ipfs result', result);\n\n            if (error) {\n              console.error(error);\n              return;\n            }\n\n            console.log(result[0].hash);\n          });\n\n          _this.setState({\n            designName: '',\n            makerName: '',\n            makerSurname: '',\n            desc: ''\n          });\n        }\n      }\n    };\n\n    _this.captureFile = function (event) {\n      event.preventDefault();\n      var file = event.target.files[0]; //var stl = new NodeStl( file, {density: 1.04});\n      //  console.log(stl.volume);\n\n      var reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onloadend = function () {\n        _this.setState({\n          buffer: Buffer(reader.result)\n        });\n\n        console.log('buffer', _this.state.buffer);\n      };\n    };\n\n    _this.captureFile2 =\n    /*#__PURE__*/\n    function () {\n      var _ref10 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee13(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging designName\");\n                stri = event.target.value;\n                _context13.next = 5;\n                return _this.setState({\n                  designName: stri\n                });\n\n              case 5:\n                console.log(_this.state.designName);\n\n              case 6:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13);\n      }));\n\n      return function (_x10) {\n        return _ref10.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFile3 =\n    /*#__PURE__*/\n    function () {\n      var _ref11 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee14(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging maker name\");\n                stri = event.target.value;\n                _context14.next = 5;\n                return _this.setState({\n                  makerName: stri\n                });\n\n              case 5:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14);\n      }));\n\n      return function (_x11) {\n        return _ref11.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFile4 =\n    /*#__PURE__*/\n    function () {\n      var _ref12 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee15(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging maker surname\");\n                stri = event.target.value;\n                _context15.next = 5;\n                return _this.setState({\n                  makerSurname: stri\n                });\n\n              case 5:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15);\n      }));\n\n      return function (_x12) {\n        return _ref12.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFile5 =\n    /*#__PURE__*/\n    function () {\n      var _ref13 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee16(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging design description\");\n                stri = event.target.value;\n                _context16.next = 5;\n                return _this.setState({\n                  desc: stri\n                });\n\n              case 5:\n                console.log(_this.state.desc);\n\n              case 6:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16);\n      }));\n\n      return function (_x13) {\n        return _ref13.apply(this, arguments);\n      };\n    }();\n\n    _this.onSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref14 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee18(event) {\n        var hash, link, format;\n        return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"Submitting design to ipfs\");\n                _context18.next = 4;\n                return ipfs.add(_this.state.buffer, function (error, result) {\n                  console.log('Ipfs result', result);\n\n                  if (error) {\n                    console.error(error);\n                    return;\n                  }\n\n                  _this.state.contract.methods.set(result[0].hash).send({\n                    from: _this.state.account\n                  }).then(\n                  /*#__PURE__*/\n                  function () {\n                    var _ref15 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee17(r) {\n                      return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n                        while (1) {\n                          switch (_context17.prev = _context17.next) {\n                            case 0:\n                              _context17.next = 2;\n                              return _this.setState({\n                                designHash: result[0].hash\n                              });\n\n                            case 2:\n                              return _context17.abrupt(\"return\", _context17.sent);\n\n                            case 3:\n                            case \"end\":\n                              return _context17.stop();\n                          }\n                        }\n                      }, _callee17);\n                    }));\n\n                    return function (_x15) {\n                      return _ref15.apply(this, arguments);\n                    };\n                  }());\n                });\n\n              case 4:\n                _context18.next = 6;\n                return timeout(10000);\n\n              case 6:\n                _context18.next = 8;\n                return _this.state.designHash;\n\n              case 8:\n                hash = _context18.sent;\n                console.log(hash);\n                console.log(\"https://ipfs.infura.io/ipfs/\".concat(_this.state.designHash));\n                link = \"https://ipfs.infura.io/ipfs/\".concat(_this.state.designHash);\n                format = _this.state.designFormat;\n                console.log(format);\n\n                if (format == 'stl') {\n                  _this.setState({\n                    stlLink: link\n                  });\n\n                  console.log(_this.state.stlLink);\n                } else {\n                  if (format == 'obj') {\n                    _this.setState({\n                      objLink: link\n                    });\n\n                    console.log(_this.state.objLink);\n                  } else {\n                    console.log(\"format not selected\");\n                  }\n                }\n\n              case 15:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18);\n      }));\n\n      return function (_x14) {\n        return _ref14.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      designHash: '',\n      contract: null,\n      web3: null,\n      buffer: null,\n      account: null,\n      designName: '',\n      makerName: '',\n      makerSurname: '',\n      desc: '',\n      stlLink: null,\n      objLink: null,\n      designFormat: 'stl',\n      username: '',\n      password: '',\n      wallet: '',\n      privateKey: '',\n      email: '',\n      register: false,\n      ethBrowser: false,\n      invalidEmail: false,\n      name: '',\n      surname: '',\n      isLogged: false\n    };\n    return _this;\n  } //login part\n\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"navbar-brand col-sm-3 col-md-2 mr-0\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, \"App di prova\")), React.createElement(\"div\", {\n        className: \"container-fluid mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        role: \"main\",\n        className: \"col-lg-12 d-flex text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"content mr-auto ml-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, !this.state.isLogged && React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"Login/Register Page\"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, this.state.ethBrowser && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, \" \", React.createElement(\"button\", {\n        onClick: this.testMeta,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, \"TestMeta\")), this.state.ethBrowser && React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, \"username:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }))), this.state.ethBrowser && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, \"password:\", React.createElement(\"input\", {\n        type: \"password\",\n        onChange: this.captureFile1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }))), this.state.register && this.state.ethBrowser ? React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, \"name:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }))) : null, this.state.register && this.state.ethBrowser ? React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, \"surname:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }))) : null, this.state.register && this.state.ethBrowser ? React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, \"email:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }))) : null, this.state.register && this.state.ethBrowser && this.state.invalidEmail && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, \"invalid email\"), this.state.register && this.state.ethBrowser ? React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, \"wallet:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }))) : null, React.createElement(\"button\", {\n        onClick: this.startApi,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416\n        },\n        __self: this\n      }, \"Debug\"), !this.state.register && this.state.ethBrowser && React.createElement(\"button\", {\n        onClick: this.startApi2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, \"Login\"), !this.state.register && this.state.ethBrowser && React.createElement(\"button\", {\n        onClick: this.setRegister,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }, \"Register\"), this.state.register && this.state.ethBrowser && React.createElement(\"button\", {\n        onClick: this.sendData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, \"SendData\"), this.state.register && this.state.ethBrowser && React.createElement(\"button\", {\n        onClick: this.Return,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431\n        },\n        __self: this\n      }, \"Return\"), !this.state.ethBrowser && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, \"Non-Ethereum browser detected, please install metamask.\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }), \"[.....metamask tutorial \", React.createElement(\"a\", {\n        href: 'https://metamask.io/download.html',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }, \"here\"), \"...]\")), this.state.isLogged && React.createElement(\"text\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444\n        },\n        __self: this\n      }, \"Design caricato:\"), this.state.stlLink && this.state.isLogged ? React.createElement(STLViewer, {\n        onSceneRendered: function onSceneRendered(element) {\n          console.log(element);\n        },\n        sceneClassName: \"test-scene\",\n        url: this.state.stlLink,\n        className: \"obj\",\n        modelColor: \"#FF0000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      }) : null, this.state.objLink && this.state.isLogged ? React.createElement(OBJViewer, {\n        onSceneRendered: function onSceneRendered(element) {\n          console.log(element);\n        },\n        sceneClassName: \"test-scene\",\n        url: this.state.objLink,\n        className: \"obj\",\n        modelColor: \"#FF0000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }) : null, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, \"\\xA0\"), this.state.isLogged && React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467\n        },\n        __self: this\n      }, \"Change design\"), this.state.isLogged && React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        accept: \".stl,.obj,.3mf,.amf\",\n        onChange: this.captureFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Send\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471\n        },\n        __self: this\n      }, \"\\xA0\")), this.state.isLogged && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474\n        },\n        __self: this\n      }, \"\\xA0\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, \"Design title:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477\n        },\n        __self: this\n      }))), this.state.isLogged && React.createElement(\"form\", {\n        onSubmit: this.captureFile2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      }, \"Design description:\", React.createElement(\"textarea\", {\n        onChange: this.captureFile5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483\n        },\n        __self: this\n      }))), this.state.isLogged && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487\n        },\n        __self: this\n      }, \"Maker name:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }))), this.state.isLogged && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493\n        },\n        __self: this\n      }, \"Maker surname:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495\n        },\n        __self: this\n      }))), this.state.isLogged && React.createElement(\"button\", {\n        onClick: this.submitMetaFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498\n        },\n        __self: this\n      }, \"Submit\"), this.state.isLogged && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500\n        },\n        __self: this\n      }, \"Select design format:\", React.createElement(\"select\", {\n        onChange: this.formatSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"stl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }, \".stl\"), React.createElement(\"option\", {\n        value: \"obj\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504\n        },\n        __self: this\n      }, \".obj\")))))))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/costantinos/Documenti/Dapp/src/components/App.js"],"names":["React","Component","Web3","ReactDOM","Dapp","OBJViewer","STLViewer","axios","NodeStl","require","ipfsClient","ipfs","host","port","protocol","timeout","delay","Promise","res","setTimeout","App","loadWeb3","loadBlockchainData","window","ethereum","web3","enable","setState","ethBrowser","currentProvider","console","log","eth","getAccounts","accounts","account","net","getId","networkId","networkData","networks","contract","Contract","abi","address","methods","get","call","designHash","alert","props","testMeta","event","preventDefault","try1","create","startApi","then","response","data","startApi2","username","state","password","post","captureFileL","stri","target","value","captureFileL1","captureFileL2","check","includes","check1","invalidEmail","email","captureFileL3","name","captureFileL4","surname","captureFileL5","wallet","setRegister","register","Return","sendData","valid","formatSelect","designFormat","submitMetaFile","designName","desc","makerName","makerSurname","toJSON","myJson","JSON","stringify","buf","Buffer","from","add","error","result","hash","captureFile","file","files","reader","FileReader","readAsArrayBuffer","onloadend","buffer","captureFile2","captureFile3","captureFile4","captureFile5","onSubmit","set","send","r","link","format","stlLink","objLink","privateKey","isLogged","captureFile1","element"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport Dapp from '../abis/Dapp.json'\nimport {OBJViewer, STLViewer} from 'react-stl-obj-viewer';\nimport axios from 'axios'\nconst NodeStl = require(\"node-stl\");\n\n\n//connessione al nodo di infura per ipfs\nconst ipfsClient = require('ipfs-http-client')\nconst ipfs = ipfsClient({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' })\n//tipi di formato .stl (più comune) 3MF AMF e .obj(open source)\n// usa accept\n// url example:'https://ipfs.infura.io/ipfs/QmZsdEtccredWWGZzZvU5fStsC7aWADJch588qAarGTky9'\n//{`https://ipfs.infura.io/ipfs/${this.state.designHash}`}\nfunction timeout(delay: number) {\nreturn new Promise( res => setTimeout(res, delay) );}\nclass App extends Component {\n\n//operazioni quando il contratto viene chiamato\n  async componentWillMount() {\n    await this.loadWeb3()\n    await this.loadBlockchainData()\n  }\n//carico la finestra (metamask) web3 o la converto in web3\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n      await this.setState({ethBrowser : true})\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n      await this.setState({ethBrowser : true})\n    }\n    else {\n      console.log('Non-Ethereum browser detected. ')\n      await this.setState({ethBrowser : false})\n    }\n  }\n// dati della blockchain:\n//account è l'indirizzo di colui che firma la transazione\n//networkid è l'id della connessione es:localhost:7545\n//contract è la variabile del contratto\n//designHash è l'hash del file salvato sull'ipfs\n  async loadBlockchainData() {\n    const web3 = window.web3\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n    const networkId = await web3.eth.net.getId()\n    const networkData = Dapp.networks[networkId]\n    if(networkData) {\n      const contract = web3.eth.Contract(Dapp.abi, networkData.address)\n      this.setState({ contract })\n      const designHash = await contract.methods.get().call()\n      this.setState({ designHash })\n    } else {\n      window.alert('Smart contract not deployed to detected network.')\n    }\n  }\n\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      designHash: '',\n      contract: null,\n      web3: null,\n      buffer: null,\n      account: null,\n      designName: '',\n      makerName:'',\n      makerSurname:'',\n      desc:'',\n      stlLink: null,\n      objLink: null,\n      designFormat : 'stl',\n      username:'',\n      password:'',\n      wallet:'',\n      privateKey:'',\n      email:'',\n      register : false,\n      ethBrowser : false,\n      invalidEmail : false,\n      name : '',\n      surname : '',\n      isLogged : false\n    }\n  }\n//login part\ntestMeta = (event) =>{\n  event.preventDefault()\n  const web3 = window.web3\n  const try1 =  web3.eth.accounts.create();\n console.log(try1)\n}\nstartApi =  (event) =>{\n  event.preventDefault()\n  axios.get('http://127.0.0.1:5000/api/get1').then(response => {\n  console.log(response.data)\n});\n}\nstartApi2 = (event) =>{\n  event.preventDefault()\n  console.log(\"sending data\")\n  const username = this.state.username\n  const password = this.state.password\n  axios.post('http://127.0.0.1:5000/api/post1',{\n    username : username,\n    password : password\n  }).then(response => {\n  console.log(response.data)\n});\n}\n\ncaptureFileL = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging username\")\n  const stri = event.target.value\n  await this.setState({ username: stri })\n  console.log(this.state.username)\n}\ncaptureFileL1 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging password\")\n  const stri = event.target.value\n  await this.setState({ password: stri })\n  console.log(this.state.password)\n}\ncaptureFileL2 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging email\")\n  const stri = event.target.value\n  var check = stri.includes(\"@\")\n  var check1 = stri.includes(\".\")\n  if(check && check1) {\n  await this.setState({invalidEmail : false})\n  await this.setState({ email: stri })\n  console.log(this.state.email)}\n  else {\n    await this.setState({invalidEmail : true })\n    console.log(\"invalidEmail\")\n  }\n}\ncaptureFileL3 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging name\")\n  const stri = event.target.value\n  await this.setState({ name: stri })\n  console.log(this.state.name)\n}\ncaptureFileL4 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging surname\")\n  const stri = event.target.value\n  await this.setState({ surname: stri })\n  console.log(this.state.surname)\n}\ncaptureFileL5 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging wallet\")\n  const stri = event.target.value\n  await this.setState({ wallet: stri })\n  console.log(this.state.wallet)\n}\nsetRegister = async (event) => {\n  event.preventDefault()\n  console.log(\"register init\")\n  await this.setState({register : true})\n}\nReturn = async (event) => {\n  event.preventDefault()\n  console.log(\"register aborted\")\n  await this.setState({register : false})\n}\nsendData =  (event) => {\n  event.preventDefault()\n  const valid = this.state.invalidEmail\n  if (valid) return\n  console.log(\"sending data\")\n  //const web3 = window.web3\n  //const try1 =  web3.eth.accounts.create();\n  //console.log(try1)\n  //this.setState({wallet : try1.address, privateKey : try1.privateKey })\n  const username = this.state.username\n  const password = this.state.password\n  const wallet = this.state.wallet\n  const email = this.state.email\n  const name = this.state.name\n  const surname = this.state.surname\n  console.log(wallet)\n  axios.post('http://127.0.0.1:5000/api/post2',{\n    username : username,\n    password : password,\n    wallet : wallet,\n    email : email,\n    name : name,\n    surname : surname\n  }).then(response => {\n  console.log(response.data)\n  this.setState({register : false})\n});\n}\n\n//end login part\n\n\n\n\n\n\n\n\n//main part\n  formatSelect = async (event) => {\n    event.preventDefault()\n    console.log(\"format selected\")\n    const designFormat =  event.target.value\n    console.log(this.state.designFormat)\n    console.log(event.target.value)\n    await  this.setState({designFormat : designFormat })\n    console.log(this.state.designFormat)\n  }\n  submitMetaFile = (event) => {\n    event.preventDefault()\n    console.log(\"submitting metadata to IPFS\")\n    const designName = this.state.designName;\n    const desc = this.state.desc;\n    const makerName = this.state.makerName;\n    const makerSurname = this.state.makerSurname;\n    const designHash = this.state.designHash;\n    if (designName == '' || makerName == '' || makerSurname == '' || desc == ''){\n      console.log(\"metadata not saved\")\n      this.setState({designName:'',makerName:'',makerSurname:'',desc:''})\n      return\n    }\n   else{\n     if(designHash == ''){\n       console.log(\"design not uploaded\")\n     }\n     else{\n         const toJSON = {\n             designName : designName,\n             makerName : makerName,\n             makerSurname : makerSurname,\n             desc : desc,\n             designHash : designHash\n             };\n     const myJson = JSON.stringify(toJSON) ;\n     console.log(toJSON)\n     console.log(myJson)\n     var buf = Buffer.from(myJson);\n     ipfs.add(buf, (error, result) => {\n       console.log('Ipfs result', result)\n       if(error) {\n         console.error(error)\n         return\n       }\n        console.log(result[0].hash)\n     })\n     this.setState({designName:'',makerName:'',makerSurname:'',desc:''})\n   }\n   }\n  }\n\n  captureFile = (event) => {\n    event.preventDefault()\n    const file = event.target.files[0]\n    //var stl = new NodeStl( file, {density: 1.04});\n  //  console.log(stl.volume);\n    const reader = new window.FileReader()\n    reader.readAsArrayBuffer(file)\n    reader.onloadend = () => {\n      this.setState({ buffer: Buffer(reader.result) })\n      console.log('buffer', this.state.buffer)\n    }\n  }\n captureFile2 = async (event) => {\n event.preventDefault()\n console.log(\"charging designName\")\n const stri = event.target.value\n await this.setState({ designName: stri })\n console.log(this.state.designName)\n }\n captureFile3 = async (event) => {\n event.preventDefault()\n console.log(\"charging maker name\")\n const stri = event.target.value\n await this.setState({ makerName: stri})\n }\n captureFile4 = async (event) => {\n event.preventDefault()\n console.log(\"charging maker surname\")\n const stri = event.target.value\n await this.setState({ makerSurname: stri})\n }\n captureFile5 = async (event) => {\n event.preventDefault()\n console.log(\"charging design description\")\n const stri = event.target.value\n await this.setState({ desc: stri})\n console.log(this.state.desc)\n }\n  onSubmit = async (event) => {\n    event.preventDefault()\n    console.log(\"Submitting design to ipfs\")\n    await ipfs.add(this.state.buffer, (error, result) => {\n      console.log('Ipfs result', result)\n      if(error) {\n        console.error(error)\n        return\n      }\n        this.state.contract.methods.set(result[0].hash).send({ from: this.state.account }).then( async (r) => {\n         return await this.setState({ designHash: result[0].hash })\n       })\n    })\n    await timeout(10000);\n    const hash = await this.state.designHash\n    console.log(hash)\n    console.log(`https://ipfs.infura.io/ipfs/${this.state.designHash}`)\n    const link = `https://ipfs.infura.io/ipfs/${this.state.designHash}`\n    const format = this.state.designFormat\n    console.log(format)\n    if(format == 'stl'){\n     this.setState({ stlLink: link })\n     console.log(this.state.stlLink)}\n    else {\n      if(format == 'obj'){\n       this.setState({objLink : link})\n       console.log(this.state.objLink)\n      }\n      else {\n        console.log(\"format not selected\")\n      }\n    }\n  }\n  render() {\n    return (\n      <div>\n        <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n          <a\n            className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            App di prova\n          </a>\n        </nav>\n        <div className=\"container-fluid mt-5\">\n          <div className=\"row\">\n            <main role=\"main\" className=\"col-lg-12 d-flex text-center\">\n              <div className=\"content mr-auto ml-auto\">\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                </a>\n                {/*login section*/}\n                <div >\n                {(!this.state.isLogged) && (<h1>Login/Register Page</h1>)}\n                {/* user logged with metamask */}\n                <form>\n                {/* for test only not in final product */}\n                {this.state.ethBrowser && ( <div> <button onClick={this.testMeta}>TestMeta</button></div>)}\n                {this.state.ethBrowser && (  <label>\n                username:\n                <input type=\"text\"  onChange={this.captureFile} />\n                </label>)}\n                </form>\n                {this.state.ethBrowser && (<form>\n                 <label>\n                password:\n                <input type=\"password\"  onChange={this.captureFile1} />\n                </label>\n                </form>)}\n                { (this.state.register && this.state.ethBrowser) ?\n                <form>\n                <label>\n                name:\n                <input type=\"text\"  onChange={this.captureFile3} />\n                </label>\n                 </form>  : null\n                }\n                { (this.state.register && this.state.ethBrowser) ?\n                <form>\n                <label>\n                surname:\n                <input type=\"text\"  onChange={this.captureFile4} />\n                </label>\n                </form>  : null\n                }\n                { (this.state.register && this.state.ethBrowser) ?\n                <form>\n                <label>\n                email:\n                <input type=\"text\"  onChange={this.captureFile2} />\n                </label>\n                 </form>  : null\n                }\n                {(this.state.register && this.state.ethBrowser && this.state.invalidEmail) && (\n                 <div>invalid email</div>)\n                 }\n                 { (this.state.register && this.state.ethBrowser) ?\n                 <form>\n                 <label>\n                 wallet:\n                 <input type=\"text\"  onChange={this.captureFile5} />\n                 </label>\n                  </form>  : null\n                }\n                {/* for test only not in final product */}\n                <button onClick={this.startApi}>Debug</button>\n\n                { (!this.state.register && this.state.ethBrowser) && (\n                <button onClick={this.startApi2}>Login</button>)\n                }\n\n                { (!this.state.register && this.state.ethBrowser )  && (\n                  <button onClick={this.setRegister}>Register</button>)\n                }\n\n                { (this.state.register && this.state.ethBrowser) && (\n                  <button onClick={this.sendData}>SendData</button>)\n                }\n\n                { (this.state.register && this.state.ethBrowser) && (\n                  <button onClick={this.Return}>Return</button>)\n                }\n\n                {/* end user logged with metamask*/}\n                {/*user without metamask*/}\n                {!this.state.ethBrowser && (<div>Non-Ethereum browser detected, please install metamask.<br />\n                [.....metamask tutorial <a href={'https://metamask.io/download.html'}>here</a>...]\n                </div>)}\n                {/*user without metamask*/}\n                </div>\n                {/*end login section*/}\n\n                {/*main section*/}\n                {(this.state.isLogged) && (<text>Design caricato:</text>)}\n                {(this.state.stlLink && this.state.isLogged ) ?\n                    <STLViewer\n                        onSceneRendered={(element) => {\n                            console.log(element)\n                        }}\n                        sceneClassName=\"test-scene\"\n                        url={this.state.stlLink}\n                        className=\"obj\"\n                        modelColor=\"#FF0000\"/> : null\n                }\n                {(this.state.objLink && this.state.isLogged) ?\n                  <OBJViewer\n                     onSceneRendered={(element) => {\n                         console.log(element)\n                       }}\n                      sceneClassName=\"test-scene\"\n                      url={this.state.objLink}\n                      className=\"obj\"\n                      modelColor=\"#FF0000\"/> : null\n               }\n\n                <p>&nbsp;</p>\n                {(this.state.isLogged) && (<h2>Change design</h2>)}\n                {(this.state.isLogged) && (<form onSubmit={this.onSubmit} >\n                  <input type='file' accept=\".stl,.obj,.3mf,.amf\" onChange={this.captureFile} />\n                  <input type='submit'  value = \"Send\"/>\n                <p>&nbsp;</p>\n                </form>)}\n                {(this.state.isLogged) && (<form >\n                <p>&nbsp;</p>\n                <label>\n                Design title:\n                <input type=\"text\" onChange={this.captureFile2} />\n                </label>\n                </form>)}\n                {(this.state.isLogged) && (<form onSubmit={this.captureFile2}>\n               <label>\n                Design description:\n                <textarea onChange={this.captureFile5} />\n               </label>\n               </form>)}\n              {(this.state.isLogged) && (<form>\n              <label>\n              Maker name:\n              <input type=\"text\"  onChange={this.captureFile3} />\n              </label>\n              </form>)}\n              {(this.state.isLogged) && (<form>\n              <label>\n              Maker surname:\n              <input type=\"text\"  onChange={this.captureFile4} />\n              </label>\n              </form>)}\n              {(this.state.isLogged) && (<button onClick={this.submitMetaFile}>Submit</button>)}\n              {(this.state.isLogged) && (<form >\n              <label>\n             Select design format:\n             <select onChange = {this.formatSelect}>\n             <option value=\"stl\">.stl</option>\n             <option value=\"obj\">.obj</option>\n          </select>\n        </label>\n      </form>)}\n      {/*end main section*/}\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}