{"ast":null,"code":"import _regeneratorRuntime from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/costantinos/Documenti/Dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/costantinos/Documenti/Dapp/src/components/App.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport Dapp from '../abis/Dapp.json';\nimport { OBJViewer, STLViewer } from 'react-stl-obj-viewer';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport designVoting from '../abis/designVoting.json';\n\nvar NodeStl = require(\"node-stl\"); //connessione al nodo di infura per ipfs\n\n\nvar ipfsClient = require('ipfs-http-client');\n\nvar ipfs = ipfsClient({\n  host: 'ipfs.infura.io',\n  port: 5001,\n  protocol: 'https'\n}); //tipi di formato .stl (più comune) 3MF AMF e .obj(open source)\n// usa accept\n// url example:'https://ipfs.infura.io/ipfs/QmZsdEtccredWWGZzZvU5fStsC7aWADJch588qAarGTky9'\n//{`https://ipfs.infura.io/ipfs/${this.state.designHash}`}\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    //operazioni quando il componente viene chiamato\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.loadWeb3();\n\n              case 2:\n                if (!(this.state.ethBrowser == true)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 5;\n                return this.loadBlockchainData();\n\n              case 5:\n                _context.next = 7;\n                return this.cookiesLog();\n\n              case 7:\n                _context.next = 9;\n                return this.setState({\n                  loading: false\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"cookiesLog\",\n    value: function () {\n      var _cookiesLog = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var isLogged, inMain, inAnn, name, surname, email;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                isLogged = Cookies.get('log');\n                inMain = Cookies.get('main');\n                inAnn = Cookies.get('announce');\n                name = Cookies.get('name');\n                surname = Cookies.get('surname');\n                email = Cookies.get('email');\n\n                if (!isLogged) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                _context2.next = 9;\n                return this.setState({\n                  isLogged: isLogged\n                });\n\n              case 9:\n                if (!inMain) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                _context2.next = 12;\n                return this.setState({\n                  main: inMain\n                });\n\n              case 12:\n                if (!inAnn) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                _context2.next = 15;\n                return this.setState({\n                  announce: inAnn\n                });\n\n              case 15:\n                if (!name) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                _context2.next = 18;\n                return this.setState({\n                  name: name\n                });\n\n              case 18:\n                if (!surname) {\n                  _context2.next = 21;\n                  break;\n                }\n\n                _context2.next = 21;\n                return this.setState({\n                  surname: surname\n                });\n\n              case 21:\n                if (!email) {\n                  _context2.next = 24;\n                  break;\n                }\n\n                _context2.next = 24;\n                return this.setState({\n                  email: email\n                });\n\n              case 24:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function cookiesLog() {\n        return _cookiesLog.apply(this, arguments);\n      }\n\n      return cookiesLog;\n    }() //carico la finestra (metamask) web3 o la converto in web3\n\n  }, {\n    key: \"loadWeb3\",\n    value: function () {\n      var _loadWeb = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!window.ethereum) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                window.web3 = new Web3(window.ethereum);\n                _context3.next = 4;\n                return window.ethereum.enable();\n\n              case 4:\n                _context3.next = 6;\n                return this.setState({\n                  ethBrowser: true\n                });\n\n              case 6:\n                _context3.next = 20;\n                break;\n\n              case 8:\n                if (!window.web3) {\n                  _context3.next = 14;\n                  break;\n                }\n\n                window.web3 = new Web3(window.web3.currentProvider);\n                _context3.next = 12;\n                return this.setState({\n                  ethBrowser: true\n                });\n\n              case 12:\n                _context3.next = 20;\n                break;\n\n              case 14:\n                console.log('Non-Ethereum browser detected. ');\n                _context3.next = 17;\n                return this.setState({\n                  ethBrowser: false\n                });\n\n              case 17:\n                _context3.next = 19;\n                return this.setState({\n                  loading: false\n                });\n\n              case 19:\n                return _context3.abrupt(\"return\");\n\n              case 20:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function loadWeb3() {\n        return _loadWeb.apply(this, arguments);\n      }\n\n      return loadWeb3;\n    }() // dati della blockchain:\n    //account è l'indirizzo di colui che firma la transazione\n    //networkid è l'id della connessione es:localhost:7545\n    //contract è la variabile del contratto\n    //designHash è l'hash del file salvato sull'ipfs\n\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var web3, accounts, networkId, networkData, contract;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                web3 = window.web3;\n                _context4.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context4.sent;\n                this.setState({\n                  account: accounts[0]\n                });\n                console.log(accounts);\n                _context4.next = 8;\n                return web3.eth.net.getId();\n\n              case 8:\n                networkId = _context4.sent;\n                console.log(networkId);\n                networkData = designVoting.networks[networkId];\n                console.log(networkData);\n\n                if (networkData) {\n                  contract = web3.eth.Contract(designVoting.abi, networkData.address);\n                  this.setState({\n                    contract: contract\n                  });\n                } else {\n                  window.alert('Smart contract not deployed to detected network.');\n                }\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }]);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.testMeta = function (event) {\n      event.preventDefault();\n      var web3 = window.web3;\n      var try1 = web3.eth.accounts.create();\n      console.log(try1);\n    };\n\n    _this.startApi = function (event) {\n      event.preventDefault();\n      axios.get('http://127.0.0.1:5000/api/get1').then(function (response) {\n        console.log(response.data);\n      });\n    };\n\n    _this.startApi2 =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(event) {\n        var username, password, wallet;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"sending data\");\n                username = _this.state.username;\n                password = _this.state.password;\n                wallet = _this.state.account;\n                axios.post('http://127.0.0.1:5000/api/post1', {\n                  username: username,\n                  password: password,\n                  wallet: wallet\n                }).then(function (response) {\n                  if (response.data.length == 1) {\n                    var name = response.data[0][3];\n                    var surname = response.data[0][4];\n                    var email = response.data[0][6];\n\n                    _this.setState({\n                      isLogged: true,\n                      name: name,\n                      surname: surname,\n                      email: email\n                    });\n\n                    _this.setState({\n                      main: true\n                    });\n\n                    Cookies.set('name', name);\n                    Cookies.set('surname', surname);\n                    Cookies.set('email', email);\n                    Cookies.set('log', 'true');\n                    Cookies.set('main', 'true');\n                    console.log(response.data[0]);\n                  } else {\n                    _this.setState({\n                      invalidLogin: true\n                    });\n\n                    console.log(\"invalid login\");\n                  }\n                });\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging username\");\n                stri = event.target.value;\n                _context6.next = 5;\n                return _this.setState({\n                  username: stri\n                });\n\n              case 5:\n                console.log(_this.state.username);\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL1 =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging password\");\n                stri = event.target.value;\n                _context7.next = 5;\n                return _this.setState({\n                  password: stri\n                });\n\n              case 5:\n                console.log(_this.state.password);\n\n              case 6:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL2 =\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(event) {\n        var stri, check, check1;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging email\");\n                stri = event.target.value;\n                check = stri.includes(\"@\");\n                check1 = stri.includes(\".\");\n\n                if (!(check && check1)) {\n                  _context8.next = 13;\n                  break;\n                }\n\n                _context8.next = 8;\n                return _this.setState({\n                  invalidEmail: false\n                });\n\n              case 8:\n                _context8.next = 10;\n                return _this.setState({\n                  email: stri\n                });\n\n              case 10:\n                console.log(_this.state.email);\n                _context8.next = 16;\n                break;\n\n              case 13:\n                _context8.next = 15;\n                return _this.setState({\n                  invalidEmail: true\n                });\n\n              case 15:\n                console.log(\"invalidEmail\");\n\n              case 16:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL3 =\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging name\");\n                stri = event.target.value;\n                _context9.next = 5;\n                return _this.setState({\n                  name: stri\n                });\n\n              case 5:\n                console.log(_this.state.name);\n\n              case 6:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFileL4 =\n    /*#__PURE__*/\n    function () {\n      var _ref6 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee10(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging surname\");\n                stri = event.target.value;\n                _context10.next = 5;\n                return _this.setState({\n                  surname: stri\n                });\n\n              case 5:\n                console.log(_this.state.surname);\n\n              case 6:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }));\n\n      return function (_x6) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    _this.setRegister =\n    /*#__PURE__*/\n    function () {\n      var _ref7 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee11(event) {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"register init\");\n                _context11.next = 4;\n                return _this.setState({\n                  register: true\n                });\n\n              case 4:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11);\n      }));\n\n      return function (_x7) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n\n    _this.Return =\n    /*#__PURE__*/\n    function () {\n      var _ref8 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee12(event) {\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"register aborted\");\n                _context12.next = 4;\n                return _this.setState({\n                  register: false\n                });\n\n              case 4:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12);\n      }));\n\n      return function (_x8) {\n        return _ref8.apply(this, arguments);\n      };\n    }();\n\n    _this.sendData = function (event) {\n      event.preventDefault();\n      var valid = _this.state.invalidEmail;\n      if (valid) return;\n      console.log(\"sending data\"); //const web3 = window.web3\n      //const try1 =  web3.eth.accounts.create();\n      //console.log(try1)\n      //this.setState({wallet : try1.address, privateKey : try1.privateKey })\n\n      var username = _this.state.username;\n      var password = _this.state.password;\n      var wallet = _this.state.account;\n      var email = _this.state.email;\n      var name = _this.state.name;\n      var surname = _this.state.surname;\n      console.log(wallet);\n      axios.post('http://127.0.0.1:5000/api/post2', {\n        username: username,\n        password: password,\n        wallet: wallet,\n        email: email,\n        name: name,\n        surname: surname\n      }).then(function (response) {\n        console.log(response.data);\n\n        _this.setState({\n          register: false\n        });\n      });\n    };\n\n    _this.logoutU =\n    /*#__PURE__*/\n    function () {\n      var _ref9 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee13(event) {\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"logout\");\n                Cookies.remove('log');\n                Cookies.remove('announce');\n                Cookies.remove('name');\n                Cookies.remove('surname');\n                Cookies.remove('email');\n                _context13.next = 9;\n                return _this.setState({\n                  isLogged: false\n                });\n\n              case 9:\n                _context13.next = 11;\n                return _this.setState({\n                  announce: false\n                });\n\n              case 11:\n                console.log(_this.state.isLogged);\n\n              case 12:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13);\n      }));\n\n      return function (_x9) {\n        return _ref9.apply(this, arguments);\n      };\n    }();\n\n    _this.toUpload =\n    /*#__PURE__*/\n    function () {\n      var _ref10 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee14(event) {\n        return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"to Upload a design\");\n                _context14.next = 4;\n                return _this.setState({\n                  announce: true\n                });\n\n              case 4:\n                _context14.next = 6;\n                return _this.setState({\n                  main: false\n                });\n\n              case 6:\n                Cookies.set('announce', 'true');\n                Cookies.remove('main');\n\n              case 8:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14);\n      }));\n\n      return function (_x10) {\n        return _ref10.apply(this, arguments);\n      };\n    }();\n\n    _this.logoutM =\n    /*#__PURE__*/\n    function () {\n      var _ref11 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee15(event) {\n        return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"logout\");\n                Cookies.remove('log');\n                Cookies.remove('main');\n                Cookies.remove('name');\n                Cookies.remove('surname');\n                Cookies.remove('email');\n                _context15.next = 9;\n                return _this.setState({\n                  isLogged: false\n                });\n\n              case 9:\n                _context15.next = 11;\n                return _this.setState({\n                  main: false\n                });\n\n              case 11:\n                console.log(_this.state.isLogged);\n\n              case 12:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15);\n      }));\n\n      return function (_x11) {\n        return _ref11.apply(this, arguments);\n      };\n    }();\n\n    _this.formatSelect =\n    /*#__PURE__*/\n    function () {\n      var _ref12 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee16(event) {\n        var designFormat;\n        return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"format selected\");\n                designFormat = event.target.value;\n                console.log(_this.state.designFormat);\n                console.log(event.target.value);\n                _context16.next = 7;\n                return _this.setState({\n                  designFormat: designFormat\n                });\n\n              case 7:\n                console.log(_this.state.designFormat);\n\n              case 8:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16);\n      }));\n\n      return function (_x12) {\n        return _ref12.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFile = function (event) {\n      event.preventDefault();\n      var file = event.target.files[0]; //var stl = new NodeStl( file, {density: 1.04});\n      //  console.log(stl.volume);\n\n      var format = _this.state.designFormat;\n\n      if (format == \"stl\") {\n        _this.setState({\n          stlFile: file\n        });\n\n        _this.setState({\n          disableObj: false\n        });\n\n        _this.setState({\n          disableStl: true\n        });\n\n        console.log(_this.state.stlFile);\n      } else {\n        if (format == 'obj') {\n          _this.setState({\n            objFile: file\n          });\n\n          _this.setState({\n            disableStl: false\n          });\n\n          _this.setState({\n            disableObj: true\n          });\n\n          console.log(_this.state.objFile);\n        } else {\n          console.log(\"format not selected\");\n        }\n      }\n\n      var reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onloadend = function () {\n        _this.setState({\n          buffer: Buffer(reader.result)\n        });\n\n        console.log('buffer', _this.state.buffer);\n      };\n    };\n\n    _this.captureFile2 =\n    /*#__PURE__*/\n    function () {\n      var _ref13 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee17(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging designName\");\n                stri = event.target.value;\n                _context17.next = 5;\n                return _this.setState({\n                  designName: stri\n                });\n\n              case 5:\n                console.log(_this.state.designName);\n\n              case 6:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17);\n      }));\n\n      return function (_x13) {\n        return _ref13.apply(this, arguments);\n      };\n    }();\n\n    _this.captureFile5 =\n    /*#__PURE__*/\n    function () {\n      var _ref14 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee18(event) {\n        var stri;\n        return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"charging design description\");\n                stri = event.target.value;\n                _context18.next = 5;\n                return _this.setState({\n                  desc: stri\n                });\n\n              case 5:\n                console.log(_this.state.desc);\n\n              case 6:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18);\n      }));\n\n      return function (_x14) {\n        return _ref14.apply(this, arguments);\n      };\n    }();\n\n    _this.onSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref15 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee19(event) {\n        return _regeneratorRuntime.wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                event.preventDefault();\n                _context19.next = 3;\n                return ipfs.add(_this.state.buffer, function (error, result) {\n                  console.log('Ipfs result', result);\n\n                  if (error) {\n                    console.error(error);\n                    return;\n                  }\n\n                  console.log(result);\n\n                  _this.setState({\n                    designHash: result[0].hash\n                  });\n\n                  console.log(\"Submitting data to ipfs\");\n                  var designName = _this.state.designName;\n                  var desc = _this.state.desc;\n                  var makerName = _this.state.makerName;\n                  var makerSurname = _this.state.makerSurname;\n                  var designHash = _this.state.designHash;\n\n                  if (designName == '' || makerName == '' || makerSurname == '' || desc == '') {\n                    console.log(\"metadata not saved\");\n\n                    _this.setState({\n                      designName: '',\n                      makerName: '',\n                      makerSurname: '',\n                      desc: ''\n                    });\n\n                    return;\n                  } else {\n                    if (designHash == '') {\n                      console.log(\"design not uploaded\");\n                    } else {\n                      var toJSON = {\n                        designName: designName,\n                        makerName: makerName,\n                        makerSurname: makerSurname,\n                        desc: desc,\n                        designHash: designHash\n                      };\n                      var myJson = JSON.stringify(toJSON);\n                      console.log(toJSON);\n                      console.log(myJson);\n                      var buf = Buffer.from(myJson);\n                      ipfs.add(buf, function (error, result) {\n                        console.log('Ipfs result', result);\n\n                        if (error) {\n                          console.error(error);\n                          return;\n                        }\n\n                        console.log(result[0].hash);\n                      });\n\n                      _this.setState({\n                        designName: '',\n                        makerName: '',\n                        makerSurname: '',\n                        desc: ''\n                      });\n                    }\n                  }\n\n                  var hash = _this.state.designHash;\n                  console.log(\"ciaooooo\"); //  hash=\"0x\"+hash\n\n                  var web3 = window.web3;\n                  var fhash = web3.utils.fromAscii(hash);\n                  console.log(\"ciaooo-\", fhash);\n\n                  _this.state.contract.methods.getExpiry().call().then(function (result) {\n                    var expiry = result.toString();\n                    console.log(expiry);\n                    var currentTimeInSeconds = Math.floor(Date.now() / 1000);\n                    console.log(currentTimeInSeconds);\n                    var manager = \"0x132Ba44C4Fc7A0f91A12b3562060D016dC500935\";\n                    var commitment = \"15\";\n                    console.log(fhash);\n\n                    _this.state.contract.methods.announce(fhash, currentTimeInSeconds, expiry, commitment, manager).send({\n                      from: _this.state.account\n                    }).on('newDesignAvailable', function (receipt) {\n                      console.log(receipt);\n                    });\n                  });\n                  /*    this.state.contract.methods.set(result[0].hash).send({ from: this.state.account }).then( (r) => {\n                      return this.setState({ designHash: result[0].hash })\n                    })*/\n\n                });\n\n              case 3:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19);\n      }));\n\n      return function (_x15) {\n        return _ref15.apply(this, arguments);\n      };\n    }();\n\n    _this.toMainU =\n    /*#__PURE__*/\n    function () {\n      var _ref16 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee20(event) {\n        return _regeneratorRuntime.wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                event.preventDefault();\n                console.log(\"to Main\");\n                Cookies.remove('announce');\n                _context20.next = 5;\n                return _this.setState({\n                  announce: false\n                });\n\n              case 5:\n                _context20.next = 7;\n                return _this.setState({\n                  main: true\n                });\n\n              case 7:\n                Cookies.set('main', 'true');\n                console.log(_this.state.announce);\n\n              case 9:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20);\n      }));\n\n      return function (_x16) {\n        return _ref16.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      designHash: '',\n      contract: null,\n      web3: null,\n      buffer: null,\n      account: null,\n      designName: '',\n      desc: '',\n      stlLink: null,\n      objLink: null,\n      designFormat: 'stl',\n      username: '',\n      password: '',\n      //    wallet:'',\n      privateKey: '',\n      email: '',\n      register: false,\n      ethBrowser: false,\n      invalidEmail: false,\n      name: '',\n      surname: '',\n      isLogged: false,\n      invalidLogin: false,\n      disableStl: true,\n      disableObj: true,\n      announce: false,\n      main: false,\n      loading: true,\n      file: null\n    };\n    return _this;\n  } //login part\n\n\n  _createClass(App, [{\n    key: \"render\",\n    // end announce part\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"navbar-brand col-sm-3 col-md-2 mr-0\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, \"App di prova\")), React.createElement(\"div\", {\n        className: \"container-fluid mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        role: \"main\",\n        className: \"col-lg-12 d-flex text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"content mr-auto ml-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }), this.state.loading && React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, \"Loading\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452\n        },\n        __self: this\n      }, !this.state.isLogged && !this.state.loading && React.createElement(\"h1\", {\n        id: \"param1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }, \"Login/Register Page\"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455\n        },\n        __self: this\n      }, this.state.ethBrowser && !this.state.isLogged && !this.state.loading && React.createElement(\"label\", {\n        id: \"param2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }, \"username:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFileL,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }))), this.state.ethBrowser && !this.state.isLogged && !this.state.loading && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        id: \"param3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }, \"password:\", React.createElement(\"input\", {\n        type: \"password\",\n        onChange: this.captureFileL1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }))), this.state.invalidLogin && !this.state.isLogged && this.state.ethBrowser && !this.state.loading && React.createElement(\"div\", {\n        id: \"param6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467\n        },\n        __self: this\n      }, \"invalid username/password\"), this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading ? React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        id: \"param7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471\n        },\n        __self: this\n      }, \"name:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFileL3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473\n        },\n        __self: this\n      }))) : null, this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading ? React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        id: \"param8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479\n        },\n        __self: this\n      }, \"surname:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFileL4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      }))) : null, this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading ? React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        id: \"param9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487\n        },\n        __self: this\n      }, \"email:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFileL2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }))) : null, this.state.register && this.state.ethBrowser && this.state.invalidEmail && !this.state.isLogged && !this.state.loading && React.createElement(\"div\", {\n        id: \"param10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494\n        },\n        __self: this\n      }, \"invalid email\"), !this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        id: \"param4\",\n        onClick: this.startApi2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498\n        },\n        __self: this\n      }, \"Login\"), !this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        id: \"param5\",\n        onClick: this.setRegister,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502\n        },\n        __self: this\n      }, \"Register\"), this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        id: \"param11\",\n        onClick: this.sendData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506\n        },\n        __self: this\n      }, \"SendData\"), this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        id: \"param12\",\n        onClick: this.Return,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510\n        },\n        __self: this\n      }, \"Return\"), !this.state.ethBrowser && !this.state.isLogged && !this.state.loading && !this.state.loading && React.createElement(\"div\", {\n        id: \"param13\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515\n        },\n        __self: this\n      }, \"Non-Ethereum browser detected, please install metamask.\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515\n        },\n        __self: this\n      }), \"[.....metamask tutorial \", React.createElement(\"a\", {\n        id: \"para\",\n        href: 'https://metamask.io/download.html',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516\n        },\n        __self: this\n      }, \"here\"), \"...]\")), this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }, \"User data\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }), \"name:\", this.state.name, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }), \"surname:\", this.state.surname, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }), \"email:\", this.state.email, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }), \"wallet:\", this.state.account), this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        onClick: this.toUpload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533\n        },\n        __self: this\n      }, \"Upload a design\"), this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        onClick: this.logoutU,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536\n        },\n        __self: this\n      }, \"Logout\"), this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539\n        },\n        __self: this\n      }, \"List avaible design to vote\"), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }, \"Design caricato:\"), this.state.ethBrowser && this.state.isLogged && this.state.disableStl && this.state.announce && !this.state.loading && this.state.stlFile ? React.createElement(STLViewer, {\n        onSceneRendered: function onSceneRendered(element) {\n          console.log(element);\n        },\n        sceneClassName: \"test-scene\",\n        file: this.state.stlFile,\n        className: \"obj\",\n        modelColor: \"#FF0000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556\n        },\n        __self: this\n      }) : null, this.state.ethBrowser && this.state.isLogged && this.state.disableObj && this.state.announce && !this.state.loading && this.state.objFile ? React.createElement(OBJViewer, {\n        onSceneRendered: function onSceneRendered(element) {\n          console.log(element);\n        },\n        sceneClassName: \"test-scene\",\n        file: this.state.objFile,\n        className: \"obj\",\n        modelColor: \"#FF0000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567\n        },\n        __self: this\n      }) : null, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577\n        },\n        __self: this\n      }, \"\\xA0\"), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578\n        },\n        __self: this\n      }, \"Change design\"), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        onChange: this.captureFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581\n        },\n        __self: this\n      }, \"\\xA0\")), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584\n        },\n        __self: this\n      }, \"\\xA0\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585\n        },\n        __self: this\n      }, \"Design title:\", React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.captureFile2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587\n        },\n        __self: this\n      }))), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"form\", {\n        onSubmit: this.captureFile2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 590\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 591\n        },\n        __self: this\n      }, \"Design description:\", React.createElement(\"textarea\", {\n        onChange: this.captureFile5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 593\n        },\n        __self: this\n      }))), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        onClick: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 596\n        },\n        __self: this\n      }, \"Submit\"), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 598\n        },\n        __self: this\n      }, \"Select design format:\", React.createElement(\"select\", {\n        onChange: this.formatSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 600\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"stl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 601\n        },\n        __self: this\n      }, \".stl\"), React.createElement(\"option\", {\n        value: \"obj\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 602\n        },\n        __self: this\n      }, \".obj\")))), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        onClick: this.logoutU,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 607\n        },\n        __self: this\n      }, \"Logout\"), this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading && React.createElement(\"button\", {\n        class: \"button\",\n        onClick: this.toMainU,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610\n        },\n        __self: this\n      }, \"Return\"))))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/costantinos/Documenti/Dapp/src/components/App.js"],"names":["React","Component","Web3","ReactDOM","Dapp","OBJViewer","STLViewer","axios","Cookies","designVoting","NodeStl","require","ipfsClient","ipfs","host","port","protocol","App","loadWeb3","state","ethBrowser","loadBlockchainData","cookiesLog","setState","loading","isLogged","get","inMain","inAnn","name","surname","email","main","announce","window","ethereum","web3","enable","currentProvider","console","log","eth","getAccounts","accounts","account","net","getId","networkId","networkData","networks","contract","Contract","abi","address","alert","props","testMeta","event","preventDefault","try1","create","startApi","then","response","data","startApi2","username","password","wallet","post","length","set","invalidLogin","captureFileL","stri","target","value","captureFileL1","captureFileL2","check","includes","check1","invalidEmail","captureFileL3","captureFileL4","setRegister","register","Return","sendData","valid","logoutU","remove","toUpload","logoutM","formatSelect","designFormat","captureFile","file","files","format","stlFile","disableObj","disableStl","objFile","reader","FileReader","readAsArrayBuffer","onloadend","buffer","Buffer","result","captureFile2","designName","captureFile5","desc","onSubmit","add","error","designHash","hash","makerName","makerSurname","toJSON","myJson","JSON","stringify","buf","from","fhash","utils","fromAscii","methods","getExpiry","call","expiry","toString","currentTimeInSeconds","Math","floor","Date","now","manager","commitment","send","on","receipt","toMainU","stlLink","objLink","privateKey","element"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport Dapp from '../abis/Dapp.json'\nimport {OBJViewer, STLViewer} from 'react-stl-obj-viewer';\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\nimport designVoting from '../abis/designVoting.json'\nconst NodeStl = require(\"node-stl\");\n\n\n//connessione al nodo di infura per ipfs\nconst ipfsClient = require('ipfs-http-client')\nconst ipfs = ipfsClient({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' })\n//tipi di formato .stl (più comune) 3MF AMF e .obj(open source)\n// usa accept\n// url example:'https://ipfs.infura.io/ipfs/QmZsdEtccredWWGZzZvU5fStsC7aWADJch588qAarGTky9'\n//{`https://ipfs.infura.io/ipfs/${this.state.designHash}`}\n\nclass App extends Component {\n\n//operazioni quando il componente viene chiamato\n  async componentWillMount() {\n    await this.loadWeb3()\n  if(this.state.ethBrowser == true) {\n    await this.loadBlockchainData()\n      await this.cookiesLog()\n      await this.setState({loading : false})\n  }\n  }\n  async cookiesLog(){\n    const isLogged = Cookies.get('log')\n    const inMain = Cookies.get('main')\n    const inAnn = Cookies.get('announce')\n    const name = Cookies.get('name')\n    const surname = Cookies.get('surname')\n    const email = Cookies.get('email')\n    if(isLogged) await this.setState({isLogged : isLogged})\n    if(inMain) await this.setState({main : inMain})\n    if(inAnn) await this.setState({announce : inAnn})\n    if(name) await this.setState({name : name})\n    if(surname) await this.setState({surname : surname})\n    if(email) await this.setState({email : email})\n  }\n//carico la finestra (metamask) web3 o la converto in web3\n  async loadWeb3() {\n   if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n      await this.setState({ethBrowser : true})\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n      await this.setState({ethBrowser : true})\n    }\n    else {\n      console.log('Non-Ethereum browser detected. ')\n      await this.setState({ethBrowser : false})\n      await this.setState({loading : false})\n      return\n    }\n  }\n// dati della blockchain:\n//account è l'indirizzo di colui che firma la transazione\n//networkid è l'id della connessione es:localhost:7545\n//contract è la variabile del contratto\n//designHash è l'hash del file salvato sull'ipfs\n  async loadBlockchainData() {\n    const web3 = window.web3\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n    console.log(accounts)\n    const networkId = await web3.eth.net.getId()\n    console.log(networkId)\n    const networkData = designVoting.networks[networkId]\n    console.log(networkData)\n    if(networkData) {\n      const contract = web3.eth.Contract(designVoting.abi, networkData.address)\n      this.setState({ contract })\n    } else {\n      window.alert('Smart contract not deployed to detected network.')\n    }\n  }\n\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      designHash: '',\n      contract: null,\n      web3: null,\n      buffer: null,\n      account: null,\n      designName: '',\n      desc:'',\n      stlLink: null,\n      objLink: null,\n      designFormat : 'stl',\n      username:'',\n      password:'',\n  //    wallet:'',\n      privateKey:'',\n      email:'',\n      register : false,\n      ethBrowser : false,\n      invalidEmail : false,\n      name : '',\n      surname : '',\n      isLogged : false,\n      invalidLogin : false,\n      disableStl : true,\n      disableObj : true,\n      announce : false,\n      main : false,\n      loading : true,\n      file : null\n    }\n  }\n//login part\ntestMeta = (event) =>{\n  event.preventDefault()\n  const web3 = window.web3\n  const try1 =  web3.eth.accounts.create();\n console.log(try1)\n}\nstartApi =  (event) =>{\n  event.preventDefault()\n  axios.get('http://127.0.0.1:5000/api/get1').then(response => {\n  console.log(response.data)\n});\n}\nstartApi2 = async (event) =>{\n  event.preventDefault()\n  console.log(\"sending data\")\n  const username = this.state.username\n  const password = this.state.password\n  const wallet = this.state.account\n  axios.post('http://127.0.0.1:5000/api/post1',{\n    username : username,\n    password : password,\n    wallet : wallet\n  }).then(response => {\n  if (response.data.length == 1) {\n    const name = response.data[0][3]\n    const surname = response.data[0][4]\n    const email = response.data[0][6]\n    this.setState({isLogged : true ,name : name, surname : surname, email: email})\n    this.setState({main : true})\n    Cookies.set('name', name)\n    Cookies.set('surname', surname)\n    Cookies.set('email', email)\n    Cookies.set('log', 'true')\n    Cookies.set('main','true')\n    console.log(response.data[0])\n  }\n  else {\n    this.setState({invalidLogin : true})\n    console.log(\"invalid login\")\n  }\n});\n}\n\ncaptureFileL = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging username\")\n  const stri = event.target.value\n  await this.setState({ username: stri })\n  console.log(this.state.username)\n}\ncaptureFileL1 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging password\")\n  const stri = event.target.value\n  await this.setState({ password: stri })\n  console.log(this.state.password)\n}\ncaptureFileL2 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging email\")\n  const stri = event.target.value\n  var check = stri.includes(\"@\")\n  var check1 = stri.includes(\".\")\n  if(check && check1) {\n  await this.setState({invalidEmail : false})\n  await this.setState({ email: stri })\n  console.log(this.state.email)}\n  else {\n    await this.setState({invalidEmail : true })\n    console.log(\"invalidEmail\")\n  }\n}\ncaptureFileL3 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging name\")\n  const stri = event.target.value\n  await this.setState({ name: stri })\n  console.log(this.state.name)\n}\ncaptureFileL4 = async (event)=> {\n  event.preventDefault()\n  console.log(\"charging surname\")\n  const stri = event.target.value\n  await this.setState({ surname: stri })\n  console.log(this.state.surname)\n}\nsetRegister = async (event) => {\n  event.preventDefault()\n  console.log(\"register init\")\n  await this.setState({register : true})\n}\nReturn = async (event) => {\n  event.preventDefault()\n  console.log(\"register aborted\")\n  await this.setState({register : false})\n}\nsendData =  (event) => {\n  event.preventDefault()\n  const valid = this.state.invalidEmail\n  if (valid) return\n  console.log(\"sending data\")\n  //const web3 = window.web3\n  //const try1 =  web3.eth.accounts.create();\n  //console.log(try1)\n  //this.setState({wallet : try1.address, privateKey : try1.privateKey })\n  const username = this.state.username\n  const password = this.state.password\n  const wallet = this.state.account\n  const email = this.state.email\n  const name = this.state.name\n  const surname = this.state.surname\n  console.log(wallet)\n  axios.post('http://127.0.0.1:5000/api/post2',{\n    username : username,\n    password : password,\n    wallet : wallet,\n    email : email,\n    name : name,\n    surname : surname\n  }).then(response => {\n  console.log(response.data)\n  this.setState({register : false})\n});\n}\nlogoutU = async (event) => {\n  event.preventDefault()\n  console.log(\"logout\")\n  Cookies.remove('log')\n  Cookies.remove('announce')\n  Cookies.remove('name')\n  Cookies.remove('surname')\n  Cookies.remove('email')\n  await this.setState({isLogged : false})\n  await this.setState({announce : false})\n  console.log(this.state.isLogged)\n}\n//end login part\n\n\n//main part\ntoUpload = async (event) =>{\n  event.preventDefault()\n  console.log(\"to Upload a design\")\n  await this.setState({announce : true})\n  await this.setState({main : false})\n  Cookies.set('announce','true')\n  Cookies.remove('main')\n}\nlogoutM = async (event) => {\n  event.preventDefault()\n  console.log(\"logout\")\n  Cookies.remove('log')\n  Cookies.remove('main')\n  Cookies.remove('name')\n  Cookies.remove('surname')\n  Cookies.remove('email')\n  await this.setState({isLogged : false})\n  await this.setState({main : false})\n  console.log(this.state.isLogged)\n}\n//end main part\n\n\n//announce part\n  formatSelect = async (event) => {\n    event.preventDefault()\n    console.log(\"format selected\")\n    const designFormat =  event.target.value\n    console.log(this.state.designFormat)\n    console.log(event.target.value)\n    await  this.setState({designFormat : designFormat })\n    console.log(this.state.designFormat)\n  }\n\n\n  captureFile = (event) => {\n    event.preventDefault()\n    const file = event.target.files[0]\n    //var stl = new NodeStl( file, {density: 1.04});\n  //  console.log(stl.volume);\n   const format = this.state.designFormat\n   if(format == \"stl\"){\n     this.setState({ stlFile: file })\n     this.setState({disableObj : false})\n     this.setState({disableStl : true})\n     console.log(this.state.stlFile)\n   }\n   else {\n     if(format == 'obj'){\n      this.setState({objFile : file})\n      this.setState({disableStl: false})\n      this.setState({disableObj : true})\n      console.log(this.state.objFile)\n     }\n     else {\n       console.log(\"format not selected\")\n     }\n   }\n    const reader = new window.FileReader()\n    reader.readAsArrayBuffer(file)\n    reader.onloadend = () => {\n      this.setState({ buffer: Buffer(reader.result) })\n      console.log('buffer', this.state.buffer)\n    }\n  }\n captureFile2 = async (event) => {\n event.preventDefault()\n console.log(\"charging designName\")\n const stri = event.target.value\n await this.setState({ designName: stri })\n console.log(this.state.designName)\n }\n captureFile5 = async (event) => {\n event.preventDefault()\n console.log(\"charging design description\")\n const stri = event.target.value\n await this.setState({ desc: stri})\n console.log(this.state.desc)\n }\n  onSubmit = async (event) => {\n    event.preventDefault()\n\n    await ipfs.add(this.state.buffer, (error, result) => {\n      console.log('Ipfs result', result)\n      if(error) {\n        console.error(error)\n        return\n      }\n      console.log(result)\n      this.setState({ designHash: result[0].hash })\n     console.log(\"Submitting data to ipfs\")\n      const designName = this.state.designName;\n      const desc = this.state.desc;\n      const makerName = this.state.makerName;\n      const makerSurname = this.state.makerSurname;\n      const designHash = this.state.designHash;\n      if (designName == '' || makerName == '' || makerSurname == '' || desc == ''){\n        console.log(\"metadata not saved\")\n        this.setState({designName:'',makerName:'',makerSurname:'',desc:''})\n        return\n      }\n     else{\n       if(designHash == ''){\n         console.log(\"design not uploaded\")\n       }\n       else{\n           const toJSON = {\n               designName : designName,\n               makerName : makerName,\n               makerSurname : makerSurname,\n               desc : desc,\n               designHash : designHash\n               };\n       const myJson = JSON.stringify(toJSON) ;\n       console.log(toJSON)\n       console.log(myJson)\n       var buf = Buffer.from(myJson);\n       ipfs.add(buf, (error, result) => {\n         console.log('Ipfs result', result)\n         if(error) {\n           console.error(error)\n           return\n         }\n          console.log(result[0].hash)\n       })\n       this.setState({designName:'',makerName:'',makerSurname:'',desc:''})\n       }\n       }\n       const hash = this.state.designHash\n       console.log(\"ciaooooo\")\n    //  hash=\"0x\"+hash\n    const web3 = window.web3\n    const fhash = web3.utils.fromAscii(hash)\n      console.log(\"ciaooo-\",fhash)\n      this.state.contract.methods.getExpiry().call().then((result) => {\n           const expiry = result.toString()\n           console.log(expiry)\n           var currentTimeInSeconds=Math.floor(Date.now()/1000);\n           console.log(currentTimeInSeconds)\n           const manager = \"0x132Ba44C4Fc7A0f91A12b3562060D016dC500935\"\n          const commitment = \"15\"\n          console.log(fhash)\n      this.state.contract.methods.announce(fhash, currentTimeInSeconds, expiry, commitment, manager ).send({from : this.state.account}).on('newDesignAvailable', function(receipt){\n      console.log(receipt);\n    })\n\n         })\n\n    /*    this.state.contract.methods.set(result[0].hash).send({ from: this.state.account }).then( (r) => {\n        return this.setState({ designHash: result[0].hash })\n      })*/\n    })\n  }\n  toMainU = async (event) => {\n    event.preventDefault()\n    console.log(\"to Main\")\n    Cookies.remove('announce')\n    await this.setState({announce : false})\n    await this.setState({main : true})\n    Cookies.set('main','true')\n    console.log(this.state.announce)\n  }\n  // end announce part\n  render() {\n    return (\n      <div>\n        <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n          <a\n            className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            App di prova\n          </a>\n        </nav>\n        <div className=\"container-fluid mt-5\">\n          <div className=\"row\">\n            <main role=\"main\" className=\"col-lg-12 d-flex text-center\">\n              <div className=\"content mr-auto ml-auto\">\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                </a>\n\n                {/* loading part*/}\n                {(this.state.loading) && (<h1>Loading</h1>)}\n                {/*end loading part*/}\n\n                {/*login section*/}\n                <div >\n                {(!this.state.isLogged && !this.state.loading) && (<h1 id=\"param1\">Login/Register Page</h1>)}\n                {/* user logged with metamask */}\n                <form>\n                {(this.state.ethBrowser && !this.state.isLogged && !this.state.loading) && (  <label id=\"param2\" >\n                username:\n                <input type=\"text\"  onChange={this.captureFileL} />\n                </label>)}\n                </form>\n                {(this.state.ethBrowser && !this.state.isLogged && !this.state.loading) && (<form>\n                 <label id=\"param3\">\n                password:\n                <input type=\"password\"  onChange={this.captureFileL1} />\n                </label>\n                </form>)}\n                {(this.state.invalidLogin && !this.state.isLogged && this.state.ethBrowser && !this.state.loading) && (<div id=\"param6\">invalid username/password</div>)\n                }\n                { (this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading) ?\n                <form>\n                <label id=\"param7\">\n                name:\n                <input type=\"text\"  onChange={this.captureFileL3} />\n                </label>\n                 </form>  : null\n                }\n                { (this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading) ?\n                <form>\n                <label id=\"param8\">\n                surname:\n                <input type=\"text\"  onChange={this.captureFileL4} />\n                </label>\n                </form>  : null\n                }\n                { (this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading) ?\n                <form>\n                <label id=\"param9\">\n                email:\n                <input type=\"text\"  onChange={this.captureFileL2} />\n                </label>\n                 </form>  : null\n                }\n                {(this.state.register && this.state.ethBrowser && this.state.invalidEmail && !this.state.isLogged && !this.state.loading) && (\n                 <div id=\"param10\">invalid email</div>)\n                 }\n\n                { (!this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading) && (\n                <button class=\"button\" id=\"param4\" onClick={this.startApi2}>Login</button>)\n                }\n\n                { (!this.state.register && this.state.ethBrowser  && !this.state.isLogged && !this.state.loading)  && (\n                  <button class=\"button\" id=\"param5\" onClick={this.setRegister}>Register</button>)\n                }\n\n                { (this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading) && (\n                  <button class=\"button\" id=\"param11\" onClick={this.sendData}>SendData</button>)\n                }\n\n                { (this.state.register && this.state.ethBrowser && !this.state.isLogged && !this.state.loading) && (\n                  <button class=\"button\" id=\"param12\" onClick={this.Return}>Return</button>)\n                }\n\n                {/* end user logged with metamask*/}\n                {/*user without metamask*/}\n                {(!this.state.ethBrowser && !this.state.isLogged && !this.state.loading && !this.state.loading) && (<div id=\"param13\">Non-Ethereum browser detected, please install metamask.<br />\n                [.....metamask tutorial <a id=\"para\" href={'https://metamask.io/download.html'}>here</a>...]\n                </div>)}\n                {/*user without metamask*/}\n                </div>\n                {/*end login section*/}\n\n\n\n\n\n\n\n                {/*main section*/}\n                { (this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading) && (\n                <p>User data<br />name:{this.state.name}<br />surname:{this.state.surname}<br />email:{this.state.email}<br />wallet:{this.state.account}</p>)\n                }\n                { (this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading) && (\n                <button class=\"button\"  onClick={this.toUpload}>Upload a design</button>)\n                }\n                { ( this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading) && (\n                  <button class=\"button\" onClick={this.logoutU}>Logout</button>)\n                }\n                { (this.state.ethBrowser && this.state.isLogged && this.state.main && !this.state.loading) && (\n                <button class=\"button\"  >List avaible design to vote</button>)\n                }\n                {/*end main section*/}\n\n\n\n\n\n\n\n\n\n\n\n                {/*announce section*/}\n                {(this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (<div>Design caricato:</div>)}\n                {(this.state.ethBrowser && this.state.isLogged && this.state.disableStl && this.state.announce && !this.state.loading && this.state.stlFile) ?\n                       <STLViewer\n                           onSceneRendered={(element) => {\n                               console.log(element)\n                           }}\n                           sceneClassName=\"test-scene\"\n                           file={this.state.stlFile}\n                           className=\"obj\"\n                           modelColor=\"#FF0000\"/> : null\n\n                   }\n               {(this.state.ethBrowser && this.state.isLogged && this.state.disableObj && this.state.announce && !this.state.loading && this.state.objFile) ?\n                        <OBJViewer\n                            onSceneRendered={(element) => {\n                                console.log(element)\n                            }}\n                            sceneClassName=\"test-scene\"\n                            file={this.state.objFile}\n                            className=\"obj\"\n                            modelColor=\"#FF0000\"/> : null\n                    }\n\n                <p>&nbsp;</p>\n                {(this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (<h2>Change design</h2>)}\n                {(this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (<form>\n                  <input type='file'  onChange={this.captureFile} />\n                <p>&nbsp;</p>\n                </form>)}\n                {(this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (<form >\n                <p>&nbsp;</p>\n                <label>\n                Design title:\n                <input type=\"text\" onChange={this.captureFile2} />\n                </label>\n                </form>)}\n                {(this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (<form onSubmit={this.captureFile2}>\n               <label>\n                Design description:\n                <textarea onChange={this.captureFile5} />\n               </label>\n               </form>)}\n              {(this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (<button class=\"button\" onClick={this.onSubmit}>Submit</button>)}\n              {(this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (<form >\n              <label>\n             Select design format:\n             <select onChange = {this.formatSelect}>\n             <option value=\"stl\">.stl</option>\n             <option value=\"obj\">.obj</option>\n          </select>\n        </label>\n      </form>)}\n      { (this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (\n        <button class=\"button\" onClick={this.logoutU}>Logout</button>)\n      }\n      { (this.state.ethBrowser && this.state.isLogged && this.state.announce && !this.state.loading) && (\n        <button class=\"button\" onClick={this.toMainU}>Return</button>)\n      }\n      {/*end announce section*/}\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}